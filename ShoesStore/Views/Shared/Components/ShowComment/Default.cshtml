@model IEnumerable<Binhluan>
@inject IHttpContextAccessor HttpContextAccessor
@{
    ViewBag.Title = "Show Comment";
}

<style>
	.fa.fa-star.yellow {
		color: yellow;
	}
</style>
<script type="text/javascript">

    function CRateOut(rating) {
        for (var i = 1; i <= rating; i++) {
            $("#span" + i).attr('class', 'fa fa-star');
        }
    }
    function CRateOver(rating) {
        for (var i = 1; i <= rating; i++) {
			$("#span" + i).attr('class', 'fa fa-star yellow');
        }
    }
	function CRateClick(rating) {
		$("#lblRating").val(rating); // Cập nhật giá trị của trường ẩn "lblRating"
		for (var i = 1; i <= rating; i++) {
			$("#span" + i).attr('class', 'fa fa-star yellow'); // Đánh dấu các sao đã chọn với màu vàng
		}
		for (var i = rating + 1; i <= 5; i++) {
			$("#span" + i).attr('class', 'fa fa-star'); // Đặt lại các sao còn lại về màu mặc định
		}
	}

	function CRateSelected() {
		var rating = parseInt($("#lblRating").val()); // Lấy giá trị số sao từ trường ẩn "lblRating"
		for (var i = 1; i <= rating; i++) {
			$("#span" + i).attr('class', 'fa fa-star yellow'); // Đánh dấu các sao đã chọn với màu vàng
		}
		for (var i = rating + 1; i <= 5; i++) {
			$("#span" + i).attr('class', 'fa fa-star'); // Đặt lại các sao còn lại về màu mặc định
		}
	}


    function VerifyRating() {
        var rating = $("#lblRating").val();
        if (rating == "0") {
            alert("Please Select Rating");
            return false;
        }
    }

</script>
<div class="col-lg-6">
	@*Average*@
	<div class="row total_rate">
		<div class="col-6">
			<div class="box_total">
				<h5>Overall</h5>
				<h4>4.0</h4>
				<h6>(03 Reviews)</h6>
			</div>
		</div>
		<div class="col-6">
			<div class="rating_list">
				<h3>Based on 3 Reviews</h3>
				<ul class="list">
					<li>
						<a href="#">
							5 Star <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i> 01
						</a>
					</li>
					<li>
						<a href="#">
							4 Star <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i> 01
						</a>
					</li>
					<li>
						<a href="#">
							3 Star <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i> 01
						</a>
					</li>
					<li>
						<a href="#">
							2 Star <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i> 01
						</a>
					</li>
					<li>
						<a href="#">
							1 Star <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i> 01
						</a>
					</li>
				</ul>
			</div>
		</div>
	</div>
	@*lIST*@
	<div class="review_list">
		@foreach (var item in Model)
{
		<div class="review_item">
			<div class="media">
				<div class="d-flex">
					<img src="img/product/review-1.png" alt="">
				</div>
				<div class="media-body">
						<h4>@item.MakhNavigation.Tenkh
							<span style="font-size:12px">
								@item.Ngaybl.ToString("dd-MMM-yyyy")
						</span>
						</h4>
						@for (int i = item.Rating; i < 5; i++)
						{
							<i class="fa fa-star"></i>
						}
				</div>
			</div>
			<p>
					@item.Noidungbl
			</p>
		</div>
		}
	</div>
</div>
<div class="col-lg-6">
	<div class="review_box">
		<h4>Add a Review</h4>
		@if (HttpContextAccessor.HttpContext.Session.GetString("Email") == null)
		{
			<p>Vui lòng <a href="@Url.Action("Login", "Account")">đăng nhập</a> để thêm đánh giá và bình luận.</p>
		}
		else
		{
			
		<p>Your Rating:</p>
		<div onmouseout="CRateSelected()" class="d-inline">
			<i id="span1" onmouseout="CRateOut(1)" onmouseover="CRateOver(1)" onclick="CRateClick(1)" class="fa fa-star"></i>
			<i id="span2" onmouseout="CRateOut(2)" onmouseover="CRateOver(2)" onclick="CRateClick(2)" class="fa fa-star"></i>
			<i id="span3" onmouseout="CRateOut(3)" onmouseover="CRateOver(3)" onclick="CRateClick(3)" class="fa fa-star"></i>
			<i id="span4" onmouseout="CRateOut(4)" onmouseover="CRateOver(4)" onclick="CRateClick(4)" class="fa fa-star"></i>
			<i id="span5" onmouseout="CRateOut(5)" onmouseover="CRateOver(5)" onclick="CRateClick(5)" class="fa fa-star"></i>

		</div>

		<form class="row contact_form" asp-action="AddComment" asp-controller="SanPham"
			  method="post" onsubmit="VerifyRating()" asp-route-name="rating">
			 
			<div class="col-md-12">
				<div class="form-group">
					<textarea class="form-control" name="SanPhamComment" id="txtSanPhamComment"
					rows="1" placeholder="Review" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Review'"></textarea>
				</div>
			</div>
			<div class="col-md-12 text-right">
				<button type="submit" value="submit" class="primary-btn">Submit Now</button>
			</div>
			<div>
				<input type="hidden" id="lblRating" value="0" />
			</div>
			
		</form>
		}
		
	</div>
</div>
