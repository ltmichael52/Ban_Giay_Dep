@model ShoesStore.Models.Khachhang

<h2>Thông tin tài khoản</h2>

<div class="left-menu">
    @Html.Partial("_LeftMenu")
</div>

<div class="user-info">
    <h3>Thông tin tài khoản của bạn</h3>

    <ul>
        <li>Họ và tên: @Model.Tenkh</li >
        <li>Email: @Model.Email</li>
        <li>Số điện thoại: @Model.Sdt</li>
        <li>Giới tính: @(Model.Gioitinh == true ? "Nam" : "Nữ")</li>
        <li>Ngày sinh: @Model.Ngaysinh?.ToString("dd/MM/yyyy")</li>
    </ul>

    <a href="#" id="edit-profile">Chỉnh sửa thông tin tài khoản</a>

    <div id="edit-profile-form" style="display: none;">
        <form id="profile-form">
            <input type="text" id="tenkh" name="tenkh" value="@Model.Tenkh" placeholder="Họ và tên" required><br>
            <input type="email" id="email" name="email" value="@Model.Email" placeholder="Email" disabled><br>
            <input type="text" id="sdt" name="sdt" value="@Model.Sdt" placeholder="Số điện thoại" required><br>
            Giới tính:
            <select asp-for="Gioitinh" class="form-control">
                <option value="true">Nam</option>
                <option value="false">Nữ</option>
            </select>

            <input type="date" id="ngaysinh" name="ngaysinh" value="@Model.Ngaysinh?.ToString("yyyy-MM-dd")" placeholder="Ngày sinh"><br>
            <input type="submit" value="Cập nhật">
            <button type="button" id="cancel-edit">Hủy</button>
        </form>
    </div>
</div>


<style>
    .section-title {
        margin-top: 20px;
        color: #333;
    }

    .user-profile-container {
        display: flex;
    }

    .left-menu {
        width: 25%;
    }

    .user-info {
        width: 75%;
        padding: 20px;
    }

    .profile-details {
        list-style: none;
        padding-left: 0;
    }

        .profile-details li {
            margin-bottom: 10px;
        }

    #edit-profile-link {
        display: block;
        margin-top: 20px;
        color: #007bff;
        text-decoration: none;
    }

    .edit-profile-form {
        display: none;
        margin-top: 20px;
    }

        .edit-profile-form h3 {
            margin-bottom: 10px;
        }

        .edit-profile-form input,
        .edit-profile-form select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            box-sizing: border-box;
        }

            .edit-profile-form input[type="submit"],
            .edit-profile-form button {
                padding: 10px 20px;
                cursor: pointer;
                background-color: #007bff;
                color: #fff;
                border: none;
                border-radius: 5px;
                transition: background-color 0.3s;
            }

                .edit-profile-form input[type="submit"]:hover,
                .edit-profile-form button:hover {
                    background-color: #0056b3;
                }

        .edit-profile-form button {
            background-color: #dc3545;
            margin-left: 10px;
        }

            .edit-profile-form button:hover {
                background-color: #bd2130;
            }
</style>
<script>
    $(document).ready(function () {
        $("#edit-profile").click(function () {
            $(this).hide();
            $("#edit-profile-form").show();
        });

        $("#cancel-edit").click(function () {
            $("#edit-profile-form").hide();
            $("#edit-profile").show();
        });

        $("#profile-form").submit(function (e) {
            e.preventDefault(); // Ngăn chặn form submit mặc định

            // Lấy dữ liệu từ form
            var tenkh = $("#tenkh").val();
            var sdt = $("#sdt").val();
            var gioitinh = $("#gioitinh").val();
            var ngaysinh = $("#ngaysinh").val();

            // Gửi dữ liệu lên server bằng AJAX
            $.ajax({
                url: '@Url.Action("ChangeProfile", "Account")',
                type: 'POST',
                data: {
                    tenkh: tenkh,
                    sdt: sdt,
                    gioitinh: gioitinh,
                    ngaysinh: ngaysinh
                },
                success: function (data) {
                    // Xử lý kết quả trả về từ server (nếu cần)
                    alert("Cập nhật thông tin thành công!");
                    location.reload(); // Tải lại trang để hiển thị thông tin mới
                },
                error: function () {
                    alert("Đã xảy ra lỗi! Vui lòng thử lại sau.");
                }
            });
        });
    });
</script>
